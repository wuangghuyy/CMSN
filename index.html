<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sinh nh·∫≠t em Ph∆∞∆°ng ‚ô•</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="wrapper">


        <!-- Sidebar b√™n tr√°i: B√°nh kem sinh nh·∫≠t -->
        <div class="sidebar left">
            <div class="cake">
                <div class="plate"></div>
                <div class="layer bottom"></div>
                <div class="layer middle"></div>
                <div class="layer top"></div>
                <div class="candles">
                    <div class="candle">
                        <div class="flame"></div>
                    </div>
                    <div class="candle">
                        <div class="flame"></div>
                    </div>
                    <div class="candle">
                        <div class="flame"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- N·ªôi dung ch√≠nh -->
        <div class="container">
            <div class="balloons row-happy">
                <!-- H√†ng "HAPPY" -->
                <div class="balloon" style="background-color: #f54242;" data-letter="H">H</div>
                <div class="balloon" style="background-color: #f58c42;" data-letter="A">A</div>
                <div class="balloon" style="background-color: #f5dc42;" data-letter="P">P</div>
                <div class="balloon" style="background-color: #42f554;" data-letter="P">P</div>
                <div class="balloon" style="background-color: #42e9f5;" data-letter="Y">Y</div>
            </div>

            <div class="balloons row-birthday">
                <!-- H√†ng "BIRTHDAY" -->
                <div class="balloon" style="background-color: #f542dd;" data-letter="B">B</div>
                <div class="balloon" style="background-color: #42a4f5;" data-letter="I">I</div>
                <div class="balloon" style="background-color: #dd42f5;" data-letter="R">T</div>
                <div class="balloon" style="background-color: #f54288;" data-letter="T">T</div>
                <div class="balloon" style="background-color: #42f5c3;" data-letter="H">H</div>
                <div class="balloon" style="background-color: #f5a742;" data-letter="D">D</div>
                <div class="balloon" style="background-color: #42f5e1;" data-letter="A">A</div>
                <div class="balloon" style="background-color: #42f5f5;" data-letter="Y">Y</div>
            </div>
            <div class="image-container">
                <img width="120" height="150" src=".//img/z6354264328589_01acfc72c10f5b2d74c782cdecb466bc.jpg" alt="">
            </div>

            <!-- Thi·ªáp ch√∫c m·ª´ng -->
            <div class="card">
                <div class="card-header">
                    Ch√∫c M·ª´ng Sinh Nh·∫≠t em Ph∆∞∆°ng!
                </div>
                <div class="card-body">
                    √Ä nhong x√™ √¥ :v Ch√∫c bu·ªïi s√°ng r·ªìi nh∆∞ng anh v·∫´n mu·ªën ch√∫c ti·∫øp hihi
                </div>
                <button onclick="showGift()">Nh·∫•n v√†o ƒë√¢y</button>
                <div class="gift-message" id="giftMessage">

                </div>
            </div>
        </div>

        <!-- Sidebar b√™n ph·∫£i: H·ªôp qu√† sinh nh·∫≠t -->
        <div class="sidebar right">
            <div class="gift-box">
                <div class="box"></div>
                <div class="ribbon-horizontal"></div>
                <div class="ribbon-vertical"></div>
                <div class="bow">
                    <div class="knot"></div>
                    <div class="loop loop-left"></div>
                    <div class="loop loop-right"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let typingInterval; // Bi·∫øn l∆∞u kho·∫£ng th·ªùi gian g√µ ch·ªØ

        function showGift() {
            const giftMessage = document.getElementById('giftMessage');
            const text = " √Ä th√¨ ch√∫c em tu·ªïi m·ªõi c√≥ nh√¨u s·ª©c kh·ªèe, xinh ƒë·∫πp h∆°n, c√≥ nhi·ªÅu th·ªùi gian tr√≤ chuy·ªán v·ªõi anh h∆°n, ∆∞·ªõc h√¥m n√†o c≈©ng l√† ch·ªß nh·∫≠t :v. A h·∫øt vƒÉn r·ªìi h·∫°t nh√†i qu√° ƒëi l·∫°i c√≤n h∆∞·ªõng n·ªôi haha. Ncl tu·ªïi m·ªõi ch√∫c e c√°i g√¨ c≈©ng m·ªõi nha.";

            // N·∫øu ƒëang hi·ªÉn th·ªã, ·∫©n ƒëi v√† d·ª´ng hi·ªáu ·ª©ng g√µ
            if (giftMessage.classList.contains('show')) {
                giftMessage.classList.remove('show'); // ·∫®n khung
                giftMessage.innerHTML = ""; // X√≥a n·ªôi dung
                clearInterval(typingInterval); // D·ª´ng hi·ªáu ·ª©ng g√µ
                return;
            }

            // Hi·ªÉn th·ªã khung tin nh·∫Øn v√† b·∫Øt ƒë·∫ßu g√µ l·∫°i
            let index = 0;
            giftMessage.innerHTML = ""; // ƒê·∫£m b·∫£o n·ªôi dung ƒë∆∞·ª£c x√≥a tr∆∞·ªõc
            giftMessage.classList.add('show'); // Hi·ªÉn th·ªã khung tin nh·∫Øn

            // H√†m g√µ t·ª´ng ch·ªØ
            typingInterval = setInterval(() => {
                if (index < text.length) {
                    giftMessage.innerHTML += text.charAt(index); // Th√™m t·ª´ng k√Ω t·ª±
                    index++;
                } else {
                    clearInterval(typingInterval); // D·ª´ng g√µ khi ho√†n t·∫•t
                }
            }, 50); // G√µ k√Ω t·ª± m·ªõi sau m·ªói 50ms
        }
        function openNote() {
            const notePopup = document.getElementById('notePopup');
            notePopup.style.display = 'block'; // Hi·ªÉn th·ªã popup
        }

        function closeNote() {
            const notePopup = document.getElementById('notePopup');
            notePopup.style.display = 'none'; // ·∫®n popup
        }

        async function saveNote() {
            const inputElement = document.getElementById('noteText'); // Ph·∫ßn t·ª≠ input l·ªùi ch√∫c
            const message = inputElement.value.trim();

            if (!message) {
                alert('Vui l√≤ng nh·∫≠p l·ªùi ch√∫c!');
                return;
            }

            try {
                const response = await fetch('http://localhost:5000/api/wishes', {
                    method: 'POST', // Ph∆∞∆°ng th·ª©c POST
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message }), // G·ª≠i d·ªØ li·ªáu l·ªùi ch√∫c
                });

                const data = await response.json();
                if (data.success) {
                    alert('Thanks kiu so much!');

                    inputElement.value = ''; // X√≥a n·ªôi dung √¥ nh·∫≠p
                    closeNote();
                } else {
                    alert('L∆∞u l·ªùi ch√∫c th·∫•t b·∫°i!');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('C√≥ l·ªói x·∫£y ra, vui l√≤ng th·ª≠ l·∫°i sau!');
            }
        }

    </script>


    <button class="note-button" onclick="openNote()">üìù</button>
    <div id="notePopup" class="note-popup">
        <textarea id="noteText" placeholder="Vi·∫øt l·ªùi ∆∞·ªõc c·ªßa b·∫°n t·∫°i ƒë√¢y..."></textarea>
        <button onclick="saveNote()">L∆∞u</button>
        <button onclick="closeNote()">ƒê√≥ng</button>
    </div>

</body>

</html>